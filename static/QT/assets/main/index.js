window.__require=function t(e,i,c){function n(s,a){if(!i[s]){if(!e[s]){var h=s.split("/");if(h=h[h.length-1],!e[h]){var l="function"==typeof __require&&__require;if(!a&&l)return l(h,!0);if(o)return o(h,!0);throw new Error("Cannot find module '"+s+"'")}s=h}var r=i[s]={exports:{}};e[s][0].call(r.exports,function(t){return n(e[s][1][t]||t)},r,r.exports,t,e,i,c)}return i[s].exports}for(var o="function"==typeof __require&&__require,s=0;s<c.length;s++)n(c[s]);return n}({api:[function(t,e,i){"use strict";cc._RF.push(e,"638f8+OZ1BA9YcPFEI0O7lo","api");var c=this&&this.__awaiter||function(t,e,i,c){return new(i||(i=Promise))(function(n,o){function s(t){try{h(c.next(t))}catch(e){o(e)}}function a(t){try{h(c.throw(t))}catch(e){o(e)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(s,a)}h((c=c.apply(t,e||[])).next())})},n=this&&this.__generator||function(t,e){var i,c,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(t){return function(e){return h([t,e])}}function h(o){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,c&&(n=2&o[0]?c.return:o[0]?c.throw||((n=c.return)&&n.call(c),0):c.next)&&!(n=n.call(c,o[1])).done)return n;switch(c=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,c=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(n=(n=s.trys).length>0&&n[n.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){s.label=o[1];break}if(6===o[0]&&s.label<n[1]){s.label=n[1],n=o;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(o);break}n[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],c=0}finally{i=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}};Object.defineProperty(i,"__esModule",{value:!0}),i.fetchQuestions=void 0,i.fetchQuestions=function(t,e){return c(this,void 0,void 0,function(){var i,c;return n(this,function(n){switch(n.label){case 0:return i=new URL("https://swintapai.com/api/get_questions"),t&&i.searchParams.append("subject",t),e&&i.searchParams.append("education_level",e),[4,fetch(i.toString())];case 1:return[4,n.sent().json()];case 2:if(c=n.sent(),!Array.isArray(c))throw new Error("Unexpected response format");return[2,c]}})})},cc._RF.pop()},{}],block:[function(t,e){"use strict";cc._RF.push(e,"a058bMvgA1MKpaE+XQr6es1","block"),cc.Class({extends:cc.Component,properties:{node_click:{default:null,type:cc.Node},audio_move:{default:null,type:cc.AudioClip},audio_win:{default:null,type:cc.AudioClip}},onLoad:function(){this.setTouch()},init:function(t,e){this.blockType=t,this.blockNum=e,this.xx=this.getPosArr().x,this.yy=this.getPosArr().y,this.node_click.active=!1,this.node_click.width=this.node.width,this.node_click.height=this.node.height},refreshArr:function(){this.xx=this.getPosArr().x,this.yy=this.getPosArr().y},setTouch:function(){this.node.on("touchstart",function(){this.posBlock=this.node.getPosition(),this.getPosBlock(),this.node_click.active=!0},this),this.node.on("touchmove",function(t){var e=t.getDelta();if("1_2"==this.blockType||"1_3"==this.blockType){if(this.posBlock.y+e.y<this.posBlockMin.y-8)return;if(this.posBlock.y+e.y>this.posBlockMax.y+8)return;this.posBlock=cc.v2(this.posBlock.x,this.posBlock.y+e.y)}else{if(this.posBlock.x+e.x<this.posBlockMin.x-8)return;if(0==this.blockNum&&this.getBlockPos(cc.v2(4,4)).x==this.posBlockMax.x)return this.posBlock=cc.v2(this.posBlock.x+e.x,this.posBlock.y),void this.node.setPosition(this.posBlock);if(this.posBlock.x+e.x>this.posBlockMax.x+8)return;this.posBlock=cc.v2(this.posBlock.x+e.x,this.posBlock.y)}this.node.setPosition(this.posBlock)},this),this.node.on("touchend",function(){this.touchEnd()},this),this.node.on("touchcancel",function(){this.touchEnd()},this)},touchEnd:function(){if(game.canEffect&&cc.audioEngine.play(this.audio_move,!1,1),0==this.blockNum&&this.pdGameOver()){var t=cc.moveBy(.3,cc.v2(300,0)),e=cc.callFunc(function(){game.gameOver()},this),i=cc.sequence(t,e);return this.node.runAction(i),void(game.canEffect&&cc.audioEngine.play(this.audio_win,!1,1))}this.xx=this.getPosArr().x,this.yy=this.getPosArr().y,this.setBlockPos(cc.v2(this.xx,this.yy)),game.getArrBlock(),this.node_click.active=!1},pdGameOver:function(){var t=this.node.getPosition(),e=this.getBlockPos(cc.v2(4,4));return t.x>=e.x&&(cc.log("\u95ef\u5173\u6210\u529f"),!0)},getPosBlock:function(){var t=cc.v2(this.xx,this.yy),e=cc.v2(this.xx,this.yy);if("1_2"==this.blockType||"1_3"==this.blockType){for(var i=1;i<10&&this.yy-i>=0&&0==game.arrBlock[this.yy-i][this.xx];i++)t=cc.v2(this.xx,this.yy-i);var c=1;c="1_2"==this.blockType?1:2;for(var n=1;n<10&&this.yy+c+n<6&&0==game.arrBlock[this.yy+c+n][this.xx];n++)e=cc.v2(this.xx,this.yy+c+n-c)}else{for(var o=1;o<10&&this.xx-o>=0&&0==game.arrBlock[this.yy][this.xx-o];o++)t=cc.v2(this.xx-o,this.yy);c=1,c="2_1"==this.blockType?1:2;for(var s=1;s<10&&this.xx+c+s<6&&0==game.arrBlock[this.yy][this.xx+c+s];s++)e=cc.v2(this.xx+c+s-c,this.yy)}this.posBlockMin=this.getBlockPos(t),this.posBlockMax=this.getBlockPos(e)},getPosArr:function(){this.posBlock=this.node.getPosition();var t=this.getPosZuoXiaJIao(this.posBlock),e=Math.floor(t.x/(game.block_WH+game.f_jiange)),i=Math.floor(t.y/(game.block_WH+game.f_jiange)),c=cc.v2(e,i),n=cc.v2(e,i);if("1_2"==this.blockType||"1_3"==this.blockType){n.y=c.y+1;var o;o="1_2"==this.blockType?4:3,c.y>o&&(c.y=o),n.y>o&&(n.y=o),c.y<0&&(c.y=0),n.y<0&&(n.y=0);var s=this.getBlockPos(c),a=this.getBlockPos(n);Math.abs(s.y-this.posBlock.y)>Math.abs(a.y-this.posBlock.y)&&(c.x=n.x,c.y=n.y)}else{n.x=c.x+1;var h;h="2_1"==this.blockType?4:3,c.x>h&&(c.x=h),n.x>h&&(n.x=h),c.x<0&&(c.x=0),n.x<0&&(n.x=0),s=this.getBlockPos(c),a=this.getBlockPos(n),Math.abs(s.x-this.posBlock.x)>Math.abs(a.x-this.posBlock.x)&&(c.x=n.x,c.y=n.y)}return c},setBlockPos:function(t){var e=cc.v2(game.blockParent.width/2,game.blockParent.width/2),i=cc.v2(t.x*(game.block_WH+game.f_jiange)-e.x+game.f_jiange,t.y*(game.block_WH+game.f_jiange)-e.y+game.f_jiange);this.node.setPosition(i)},getBlockPos:function(t){var e=cc.v2(game.blockParent.width/2,game.blockParent.width/2);return cc.v2(t.x*(game.block_WH+game.f_jiange)-e.x+game.f_jiange,t.y*(game.block_WH+game.f_jiange)-e.y+game.f_jiange)},getPosZuoXiaJIao:function(t){var e=cc.v2(game.blockParent.width/2+game.f_jiange,game.blockParent.width/2+game.f_jiange);return cc.v2(e.x+t.x,e.y+t.y)},update:function(){}}),cc._RF.pop()},{}],btnLevel:[function(t,e){"use strict";cc._RF.push(e,"a395c1ZgsVDjoSDI46BcrxW","btnLevel"),cc.Class({extends:cc.Component,properties:{label_num:{default:null,type:cc.Label}},onLoad:function(){},init:function(t){this.i_num=t,this.label_num.string=t},clickBtn:function(){cc.log("\u9009\u4e2d\u7684\u662f\u7b2c"+this.i_num+"\u5173"),game.playLevel(this.i_num)},start:function(){}}),cc._RF.pop()},{}],common:[function(t,e,i){"use strict";cc._RF.push(e,"0d4caYJOTNPiam/wt9vLaT1","common");var c,n=this&&this.__extends||(c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),o=this&&this.__decorate||function(t,e,i,c){var n,o=arguments.length,s=o<3?e:null===c?c=Object.getOwnPropertyDescriptor(e,i):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,c);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(o<3?n(s):o>3?n(e,i,s):n(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,a=s.ccclass,h=s.property,l=t("./api"),r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.bg_1=[],e.node_arr=[],e.node_shuiBoWen=null,e.node_fish=null,e.particle_arr=[],e.autio_shui=null,e.timeShuiBoWen=0,e.timeRandomShuiBoWen=0,e.timeFish=0,e.timeRandomFish=0,e.pos_begin=cc.v2(0,0),e.pos_end=cc.v2(0,0),e}return n(e,t),e.prototype.onLoad=function(){window.common=this,this.playShuiBoWen(),this.playFish(),this.getQuestions(),this.timeRandomShuiBoWen=300+600*Math.random(),this.timeRandomFish=480+800*Math.random(),this.allParticleHide(),this.allNodeHide(),this.node_arr[0].active=!0},e.prototype.allParticleHide=function(){this.particle_arr.forEach(function(t){return t.node.active=!1})},e.prototype.allNodeHide=function(){this.node_arr.forEach(function(t){return t.active=!1})},e.prototype.playShuiBoWen=function(){var t,e=720*Math.random()-360,i=1280*Math.random()-640;this.node_shuiBoWen.setPosition(cc.v2(e,i)),this.node_shuiBoWen.getComponent(cc.Animation).play("shuiBoWen"),(null===(t=window.game)||void 0===t?void 0:t.canEffect)&&cc.audioEngine.play(this.autio_shui,!1,1)},e.prototype.playFish=function(){this.node_fish.stopAllActions();var t=this.node_fish.children;t.forEach(function(t){return t.active=!1}),t[Math.floor(3*Math.random())].active=!0;var e=[[cc.v2(420,568),cc.v2(-70,345),cc.v2(-460,650)],[cc.v2(-300,650),cc.v2(166,46),cc.v2(-180,-828)],[cc.v2(450,40),cc.v2(-170,-780)],[cc.v2(-500,-227),cc.v2(100,-747),cc.v2(300,730)]],i=Math.floor(Math.random()*e.length),c=[5,7,3.5,8][i],n=cc.cardinalSplineTo(c,e[i],0);this.node_fish.runAction(n)},e.prototype.start=function(){cc.log("start")},e.prototype.changeSkin=function(t){var e;this.allNodeHide(),this.allParticleHide(),cc.log("\u6570\u7ec4\u89d2\u6807\uff1a"+t),null===(e=window.game)||void 0===e||e.chengBlocks(t),this.node_arr[t].active=!0,this.bg.spriteFrame=this.bg_1[t],0!==t&&5!==t&&(7===t&&(this.particle_arr[0].node.active=!0),this.particle_arr[t].node.active=!0)},e.prototype.btnCallBack=function(t,e){this.allNodeHide(),this.allParticleHide(),cc.log(e);var i=Math.floor(10*Math.random());cc.log("\u6570\u7ec4\u89d2\u6807\uff1a"+i),window.game.i_skin=i,window.game.chengBlocks(),this.node_arr[i].active=!0,this.bg.spriteFrame=this.bg_1[i],0!==i&&5!==i&&(7===i&&(this.particle_arr[0].node.active=!0),this.particle_arr[i].node.active=!0)},e.prototype.update=function(){if(this.timeShuiBoWen++,this.timeShuiBoWen>this.timeRandomShuiBoWen&&(this.timeShuiBoWen=0,this.timeRandomShuiBoWen=300+600*Math.random(),this.playShuiBoWen()),this.timeFish++,this.timeFish>this.timeRandomFish&&(this.timeFish=0,this.timeRandomFish=500+300*Math.random(),this.playFish()),this.pos_end=cc.v2(this.node_fish.x,this.node_fish.y),this.pos_begin.x!==this.pos_end.x&&this.pos_begin.y!==this.pos_end.y){var t=this.getAngle(this.pos_begin,this.pos_end);this.node_fish.angle=-t}this.pos_begin=this.pos_end},e.prototype.getAngle=function(t,e){var i=e.x-t.x,c=e.y-t.y,n=i/Math.sqrt(i*i+c*c),o=Math.acos(n),s=180/(Math.PI/o);return c<0?s=-s:0===c&&i<0&&(s=180),90-s},e.prototype.getQuestions=function(){l.fetchQuestions("English","University").then(function(t){console.log("\u9898\u5e93\uff1a",t)})},o([h(cc.Sprite)],e.prototype,"bg",void 0),o([h([cc.SpriteFrame])],e.prototype,"bg_1",void 0),o([h([cc.Node])],e.prototype,"node_arr",void 0),o([h(cc.Node)],e.prototype,"node_shuiBoWen",void 0),o([h(cc.Node)],e.prototype,"node_fish",void 0),o([h([cc.ParticleSystem])],e.prototype,"particle_arr",void 0),o([h(cc.AudioClip)],e.prototype,"autio_shui",void 0),o([a],e)}(cc.Component);i.default=r,cc._RF.pop()},{"./api":"api"}],gameData:[function(t,e){"use strict";cc._RF.push(e,"99e41oxfpRFvIDWH65x2bs5","gameData"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){window.gameData=this,this.init()},init:function(){this.arr_blockType=[["2_1","1_2","1_3","1_3","2_1","3_1","3_1"],["2_1","1_2","1_2","1_2","1_3","2_1","3_1"],["2_1","1_2","1_2","1_3","1_3","2_1"],["2_1","1_2","1_2","1_3","2_1","3_1"],["2_1","1_2","1_2","1_3","2_1","2_1","3_1"],["2_1","1_2","1_3","2_1","3_1"],["2_1","1_2","1_2","2_1","2_1","2_1","2_1","3_1"],["2_1","1_2","1_3","1_3","2_1","2_1"],["2_1","1_2","1_2","1_3","1_3","2_1","2_1","3_1"],["2_1","1_2","1_3","1_3","1_3","2_1","2_1","2_1","2_1","3_1","3_1","3_1"]],this.arr_blockPos=[[cc.v2(0,3),cc.v2(1,1),cc.v2(3,1),cc.v2(5,2),cc.v2(3,4),cc.v2(2,0),cc.v2(1,5)],[cc.v2(1,3),cc.v2(4,1),cc.v2(1,1),cc.v2(0,2),cc.v2(3,2),cc.v2(4,4),cc.v2(2,5)],[cc.v2(0,3),cc.v2(3,3),cc.v2(5,4),cc.v2(5,1),cc.v2(2,2),cc.v2(2,1)],[cc.v2(0,3),cc.v2(4,0),cc.v2(5,3),cc.v2(3,1),cc.v2(1,1),cc.v2(0,5)],[cc.v2(0,3),cc.v2(3,4),cc.v2(1,1),cc.v2(5,1),cc.v2(3,1),cc.v2(0,5),cc.v2(3,0)],[cc.v2(0,3),cc.v2(2,2),cc.v2(4,2),cc.v2(4,1),cc.v2(0,4)],[cc.v2(0,3),cc.v2(3,3),cc.v2(5,3),cc.v2(0,0),cc.v2(0,1),cc.v2(3,5),cc.v2(0,5),cc.v2(3,2)],[cc.v2(1,3),cc.v2(0,3),cc.v2(2,0),cc.v2(4,3),cc.v2(4,2),cc.v2(0,0)],[cc.v2(0,3),cc.v2(1,0),cc.v2(2,4),cc.v2(5,0),cc.v2(4,2),cc.v2(2,2),cc.v2(0,4),cc.v2(2,0)],[cc.v2(2,3),cc.v2(4,3),cc.v2(2,0),cc.v2(1,1),cc.v2(0,3),cc.v2(3,0),cc.v2(0,0),cc.v2(3,5),cc.v2(1,5),cc.v2(3,1),cc.v2(3,2),cc.v2(1,4)]],this.arr_blockPos_TiShi=[[cc.v2(0,3),cc.v2(1,1),cc.v2(3,0),cc.v2(5,0),cc.v2(3,4),cc.v2(0,0),cc.v2(1,5)],[cc.v2(1,3),cc.v2(4,1),cc.v2(1,1),cc.v2(0,2),cc.v2(3,0),cc.v2(4,4),cc.v2(2,5)],[cc.v2(0,3),cc.v2(3,0),cc.v2(5,4),cc.v2(5,0),cc.v2(2,0),cc.v2(0,1)],[cc.v2(0,3),cc.v2(4,0),cc.v2(5,4),cc.v2(3,0),cc.v2(1,1),cc.v2(0,5)],[cc.v2(0,3),cc.v2(3,4),cc.v2(1,1),cc.v2(5,0),cc.v2(3,1),cc.v2(0,5),cc.v2(1,0)],[cc.v2(0,3),cc.v2(2,0),cc.v2(4,0),cc.v2(0,1),cc.v2(0,4)],[cc.v2(0,3),cc.v2(3,0),cc.v2(5,0),cc.v2(0,0),cc.v2(0,1),cc.v2(3,5),cc.v2(0,5),cc.v2(0,2)],[cc.v2(0,3),cc.v2(0,4),cc.v2(2,0),cc.v2(4,0),cc.v2(0,2),cc.v2(0,0)],[cc.v2(2,3),cc.v2(1,2),cc.v2(2,4),cc.v2(5,0),cc.v2(4,0),cc.v2(2,2),cc.v2(0,4),cc.v2(0,0)],[cc.v2(2,3),cc.v2(4,4),cc.v2(2,0),cc.v2(1,1),cc.v2(0,1),cc.v2(3,0),cc.v2(0,0),cc.v2(2,5),cc.v2(0,5),cc.v2(3,1),cc.v2(3,2),cc.v2(1,4)]]}}),cc._RF.pop()},{}],gameEdit:[function(t,e){"use strict";cc._RF.push(e,"fa6438epplPIJZVH57EEqpu","gameEdit"),cc.Class({extends:cc.Component,properties:{blockParent:{default:null,type:cc.Node},pre_block:{default:null,type:cc.Prefab},spf_block:{default:[],type:[cc.SpriteFrame]}},onLoad:function(){},btnClick:function(t,e){if(cc.log(e),"1_2"==e||"1_3"==e||"2_1"==e||"3_1"==e)this.addBlock(e);else if("logArr"==e)this.logArr();else if("cleanBlocks"==e)for(var i=this.blockParent.children,c=i.length-1;c>=0;c--)i[c].getComponent("block")&&i[c].removeFromParent()},addBlock:function(t){var e=cc.instantiate(this.pre_block);e.parent=this.blockParent,e.getComponent("block").init(t),"1_2"==t?(e.width=108,e.height=220,e.getComponent(cc.Sprite).spriteFrame=this.spf_block[0]):"1_3"==t?(e.width=108,e.height=332,e.getComponent(cc.Sprite).spriteFrame=this.spf_block[1]):"2_1"==t?(e.width=220,e.height=108,e.getComponent(cc.Sprite).spriteFrame=this.spf_block[2]):"3_1"==t&&(e.width=332,e.height=108,e.getComponent(cc.Sprite).spriteFrame=this.spf_block[3])},logArr:function(){for(var t=[],e=[],i=this.blockParent.children,c=0;c<i.length;c++){var n=i[c].getComponent("block");n&&(e.push(n.blockType),t.push("cc.v2("+n.xx+","+n.yy+")"))}cc.log(e),cc.log(t.toString())}}),cc._RF.pop()},{}],game:[function(t,e){"use strict";cc._RF.push(e,"e25f3XfqX9IZ67Gcus6VXVq","game"),cc.Class({extends:cc.Component,properties:{nodeReady:{default:null,type:cc.Node},nodePlaying:{default:null,type:cc.Node},nodeOver:{default:null,type:cc.Node},nodeSkin:{default:null,type:cc.Node},nodeLevels:{default:null,type:cc.Node},nodeSetting:{default:null,type:cc.Node},nodeBtnPlaying:{default:null,type:cc.Node},pre_block_test:{default:null,type:cc.Prefab},blockParent:{default:null,type:cc.Node},pre_block:{default:null,type:cc.Prefab},pre_btnLevel:{default:null,type:cc.Prefab},spa_block:{default:[],type:[cc.SpriteAtlas]},spf_block:{default:[],type:[cc.SpriteFrame]},autio_btn:{default:null,type:cc.AudioClip},audio_bg:{default:[],type:[cc.AudioClip]}},onLoad:function(){this.canEffect=!0,this.canMusic=!0,this.maxLevel=10,this.gameType=0,this.timeScore=0,this.socreCurr=0,this.blockPool=new cc.NodePool,window.game=this,this.i_skin=0,this.block_skin=1,this.i_level=1,this.nodeReady.active=!0,this.nodePlaying.active=!1,this.nodeOver.active=!1,this.nodeSkin.active=!1,this.nodeLevels.active=!1,this.nodeSetting.active=!1,this.f_jiange=2,this.block_WH=110,this.initBtnPos(),this.setBlockParent();for(var t=0;t<gameData.arr_blockType[this.i_level-1].length;t++)this.addBlock(gameData.arr_blockType[this.i_level-1][t],gameData.arr_blockPos[this.i_level-1][t],t);this.getArrBlock(),this.refreshLevel(),this.nodeSkin.active=!1,this.skinContent=this.nodeSkin.getChildByName("scrollView").getChildByName("view").getChildByName("content"),this.skinContent.height=1420,this.skinContent.getChildByName("node_skin_1").active=!0,this.skinContent.getChildByName("node_skin_2").active=!1,this.xuanZhongSkin_1(0),this.xuanZhongSkin_2(0),this.levelContent=this.nodeLevels.getChildByName("pageView").getChildByName("view").getChildByName("content"),this.addBtnLevel(),this.canMusic&&(this.audioBg=cc.audioEngine.play(this.audio_bg[0],!0,1))},refreshLevel:function(){this.nodePlaying.getChildByName("mask").getChildByName("spLevel").getChildByName("labelLevel").getComponent(cc.Label).string=this.i_level,this.nodeOver.getChildByName("spLevel").getChildByName("labelLevel").getComponent(cc.Label).string=this.i_level-1},refreshScore:function(){var t=Math.floor(this.socreCurr/60),e=this.socreCurr%60;e<10&&(e="0"+e),this.nodeOver.getChildByName("currentScore").getComponent(cc.Label).string="\u5f53\u524d\u5206\u6570\uff1a"+t+":"+e;var i=cc.sys.localStorage.getItem("i_bestScore_"+this.i_level);i?i>this.socreCurr&&(i=this.socreCurr,cc.sys.localStorage.setItem("i_bestScore_"+this.i_level,i)):(i=this.socreCurr,cc.sys.localStorage.setItem("i_bestScore_"+this.i_level,i));var c=Math.floor(i/60),n=i%60;n<10&&(n="0"+n),this.nodeOver.getChildByName("bestScore").getComponent(cc.Label).string="\u6700\u4f73\u5206\u6570\uff1a"+c+":"+n},gameOver:function(){this.gameType=2,this.i_level++,this.i_level>this.maxLevel&&(this.i_level=this.maxLevel),this.refreshLevel(),this.nodeOver.active=!0,this.nodePlaying.active=!1,this.nodeReady.active=!1,this.refreshScore()},initArr:function(){this.arrBlock=[];for(var t=0;t<6;t++)this.arrBlock[t]=[];for(var e=0;e<6;e++)for(var i=0;i<6;i++)this.arrBlock[e][i]=0},getArrBlock:function(){this.initArr();for(var t=this.blockParent.children,e=0;e<t.length;e++){var i=t[e].getComponent("block");i&&(this.arrBlock[i.yy][i.xx]=1,"1_2"==i.blockType?this.arrBlock[i.yy+1][i.xx]=1:"1_3"==i.blockType?(this.arrBlock[i.yy+1][i.xx]=1,this.arrBlock[i.yy+2][i.xx]=1):"2_1"==i.blockType?this.arrBlock[i.yy][i.xx+1]=1:"3_1"==i.blockType&&(this.arrBlock[i.yy][i.xx+1]=1,this.arrBlock[i.yy][i.xx+2]=1))}this.logArrBlock()},logArrBlock:function(){for(var t=5;t>=0;t--);},addBlock_test:function(){for(var t=cc.v2(-this.blockParent.width/2,-this.blockParent.height/2),e=0;e<6;e++)for(var i=0;i<6;i++){var c=cc.instantiate(this.pre_block_test);c.parent=this.blockParent,c.width=this.block_WH,c.height=this.block_WH,c.getChildByName("labelXY").getComponent(cc.Label).string="("+e+","+i+")",c.setPosition(cc.v2(t.x+this.block_WH*i+this.f_jiange*i+this.block_WH/2+this.f_jiange,t.y+this.block_WH*e+this.f_jiange*e+this.block_WH/2+this.f_jiange))}},addBtnLevel:function(){for(var t=1,e=this.levelContent.children,i=0;i<e.length;i++)for(var c=0;c<7;c++)for(var n=0;n<4;n++){var o=cc.instantiate(this.pre_btnLevel);o.parent=e[i];var s=cc.v2(-240,e[i].height/2-o.height/2-20),a=cc.v2(s.x+160*n,s.y+-140*c);o.setPosition(a);var h=o.getComponent("btnLevel");h&&(h.init(t),t++)}},chengBlocks:function(t){this.i_skin=t;for(var e=this.blockParent.children,i=0;i<e.length;i++){var c=e[i].getComponent("block");if(c){if("1_2"==c.blockType&&(e[i].getComponent(cc.Sprite).spriteFrame=this.spa_block[this.i_skin].getSpriteFrame("1x2_nor"),e[i].getChildByName("click").getComponent(cc.Sprite).spriteFrame=this.spa_block[this.i_skin].getSpriteFrame("1x2_click")),"1_3"==c.blockType&&(e[i].getComponent(cc.Sprite).spriteFrame=this.spa_block[this.i_skin].getSpriteFrame("1x3_nor"),e[i].getChildByName("click").getComponent(cc.Sprite).spriteFrame=this.spa_block[this.i_skin].getSpriteFrame("1x3_click")),"2_1"==c.blockType){if(0==c.blockNum){e[i].getComponent(cc.Sprite).spriteFrame=this.spf_block[this.block_skin];continue}e[i].getComponent(cc.Sprite).spriteFrame=this.spa_block[this.i_skin].getSpriteFrame("2x1_nor"),e[i].getChildByName("click").getComponent(cc.Sprite).spriteFrame=this.spa_block[this.i_skin].getSpriteFrame("2x1_click")}"3_1"==c.blockType&&(e[i].getComponent(cc.Sprite).spriteFrame=this.spa_block[this.i_skin].getSpriteFrame("3x1_nor"),e[i].getChildByName("click").getComponent(cc.Sprite).spriteFrame=this.spa_block[this.i_skin].getSpriteFrame("3x1_click"))}}},chengBlockHero:function(t){this.block_skin=t;for(var e=this.blockParent.children,i=0;i<e.length;i++){var c=e[i].getComponent("block");if(c&&"2_1"==c.blockType&&0==c.blockNum)return void(e[i].getComponent(cc.Sprite).spriteFrame=this.spf_block[this.block_skin])}},onBlockKilled:function(t){this.blockPool.put(t)},addBlock:function(t,e,i){var c=null;(c=this.blockPool.size()>0?this.blockPool.get():cc.instantiate(this.pre_block)).parent=this.blockParent;var n=cc.v2(e.x*(this.block_WH+this.f_jiange),e.y*(this.block_WH+this.f_jiange));if(c.setPosition(this.getPosZXJ(n)),c.getComponent("block").init(t,i),"1_2"==t)c.width=108,c.height=220,c.getComponent(cc.Sprite).spriteFrame=this.spa_block[this.i_skin].getSpriteFrame("1x2_nor"),c.getChildByName("click").getComponent(cc.Sprite).spriteFrame=this.spa_block[this.i_skin].getSpriteFrame("1x2_click");else if("1_3"==t)c.width=108,c.height=332,c.getComponent(cc.Sprite).spriteFrame=this.spa_block[this.i_skin].getSpriteFrame("1x3_nor"),c.getChildByName("click").getComponent(cc.Sprite).spriteFrame=this.spa_block[this.i_skin].getSpriteFrame("1x3_click");else if("2_1"==t){if(c.width=220,c.height=108,0==i)return c.getComponent(cc.Sprite).spriteFrame=this.spf_block[this.block_skin],void(c.getChildByName("click").getComponent(cc.Sprite).spriteFrame=this.spf_block[0]);c.getComponent(cc.Sprite).spriteFrame=this.spa_block[this.i_skin].getSpriteFrame("2x1_nor"),c.getChildByName("click").getComponent(cc.Sprite).spriteFrame=this.spa_block[this.i_skin].getSpriteFrame("2x1_click")}else"3_1"==t&&(c.width=332,c.height=108,c.getComponent(cc.Sprite).spriteFrame=this.spa_block[this.i_skin].getSpriteFrame("3x1_nor"),c.getChildByName("click").getComponent(cc.Sprite).spriteFrame=this.spa_block[this.i_skin].getSpriteFrame("3x1_click"))},getPosZXJ:function(t){var e=cc.v2(-this.blockParent.width/2+this.f_jiange,-this.blockParent.width/2+this.f_jiange);return cc.v2(e.x+t.x,t.y+e.y)},playLevel:function(t){t>this.maxLevel&&(t=this.maxLevel),this.i_level=t,this.nodeLevels.active=!1,this.nodeOver.active=!1,this.nodePlaying.active=!0,this.nodeReady.active=!1,this.gameType=1,this.socreCurr=0,this.timeScore=0;for(var e=this.blockParent.children,i=e.length-1;i>=0;i--)e[i].getComponent("block")&&this.onBlockKilled(e[i]);for(var c=0;c<gameData.arr_blockType[this.i_level-1].length;c++)this.addBlock(gameData.arr_blockType[this.i_level-1][c],gameData.arr_blockPos[this.i_level-1][c],c);this.getArrBlock(),this.refreshLevel()},clickBtn:function(t,e){if(cc.log(e),game.canEffect&&cc.audioEngine.play(this.autio_btn,!1,1),"btnPlay_ready"==e){this.nodeReady.active=!1,this.nodePlaying.active=!0,this.nodeOver.active=!1,this.gameType=1,this.socreCurr=0,this.timeScore=0;for(var i=(n=this.blockParent.children).length-1;i>=0;i--)(d=n[i].getComponent("block"))&&this.onBlockKilled(n[i]);for(var c=0;c<gameData.arr_blockType[this.i_level-1].length;c++)this.addBlock(gameData.arr_blockType[this.i_level-1][c],gameData.arr_blockPos[this.i_level-1][c],c);this.getArrBlock()}else if("btnSkin_ready"==e)this.nodeSkin.active=!0,this.nodePlaying.active=!1,this.nodeReady.active=!1,this.nodeOver.active=!1;else if("btnSetting_ready"==e)this.nodeSetting.active=!0;else if("btnHome_playing"==e)this.nodeReady.active=!0,this.nodePlaying.active=!1;else if("btnMenu_playing"==e)this.actMenu("btnMenu_playing");else if("btnSetting_playiny"==e)this.nodeSetting.active=!0;else if("btnMenuClose_playing"==e)this.actMenu("btnMenuClose_playing");else if("btnSkin_playiny"==e)this.nodeSkin.active=!0,this.nodePlaying.active=!1,this.nodeReady.active=!1,this.nodeOver.active=!1;else if("btnLevels_playiny"==e)this.nodeLevels.active=!0,this.nodeSkin.active=!1,this.nodePlaying.active=!1,this.nodeReady.active=!1,this.nodeOver.active=!1;else if("btnMenuReplay_playing"==e){for(var n=this.blockParent.children,o=0,s=0;s<n.length;s++)if(d=n[s].getComponent("block")){var a=gameData.arr_blockPos[this.i_level-1][o];o++;var h=cc.v2(a.x*(this.block_WH+this.f_jiange),a.y*(this.block_WH+this.f_jiange));n[s].setPosition(this.getPosZXJ(h)),d.refreshArr()}this.getArrBlock()}else if("btnMenuHint_playing"==e){n=this.blockParent.children,o=0;for(var l=0;l<n.length;l++)(d=n[l].getComponent("block"))&&(a=gameData.arr_blockPos_TiShi[this.i_level-1][o],o++,h=cc.v2(a.x*(this.block_WH+this.f_jiange),a.y*(this.block_WH+this.f_jiange)),n[l].setPosition(this.getPosZXJ(h)),d.refreshArr());this.getArrBlock()}else if("btnSkin_over"==e)this.nodeSkin.active=!0,this.nodePlaying.active=!1,this.nodeReady.active=!1,this.nodeOver.active=!1;else if("btnLevels_over"==e)this.nodeLevels.active=!0,this.nodeSkin.active=!1,this.nodePlaying.active=!1,this.nodeReady.active=!1,this.nodeOver.active=!1;else if("btn_rePlay_over"==e){this.gameType=1,this.socreCurr=0,this.timeScore=0,n=this.blockParent.children,o=0,this.i_level--,this.refreshLevel();for(var r=0;r<n.length;r++)(d=n[r].getComponent("block"))&&(a=gameData.arr_blockPos[this.i_level-1][o],o++,h=cc.v2(a.x*(this.block_WH+this.f_jiange),a.y*(this.block_WH+this.f_jiange)),n[r].setPosition(this.getPosZXJ(h)),d.refreshArr());this.getArrBlock(),this.nodeOver.active=!1,this.nodePlaying.active=!0,this.nodeReady.active=!1}else if("btn_nextPlay"==e){this.gameType=1,this.socreCurr=0,this.timeScore=0;for(var g=(n=this.blockParent.children).length-1;g>=0;g--){var d;(d=n[g].getComponent("block"))&&this.onBlockKilled(n[g])}this.nodeOver.active=!1,this.nodePlaying.active=!0,this.nodeReady.active=!1;for(var v=0;v<gameData.arr_blockType[this.i_level-1].length;v++)this.addBlock(gameData.arr_blockType[this.i_level-1][v],gameData.arr_blockPos[this.i_level-1][v],v);this.getArrBlock()}else if("toggle1"==e)this.skinContent.height=1420,this.skinContent.getChildByName("node_skin_1").active=!0,this.skinContent.getChildByName("node_skin_2").active=!1;else if("toggle2"==e)this.skinContent.height=2400,this.skinContent.getChildByName("node_skin_1").active=!1,this.skinContent.getChildByName("node_skin_2").active=!0;else if("btnBack_skin"==e)this.nodeSkin.active=!1,0==this.gameType?this.nodeReady.active=!0:1==this.gameType?this.nodePlaying.active=!0:2==this.gameType&&(this.nodeOver.active=!0);else if("101"==e||"102"==e||"103"==e||"104"==e||"105"==e||"106"==e||"107"==e||"108"==e||"109"==e||"110"==e){var _=parseInt(e);common.changeSkin(_-101),this.xuanZhongSkin_1(_-101),_-101==7?this.canMusic&&(cc.audioEngine.stop(this.audioBg),this.audioBg=cc.audioEngine.play(this.audio_bg[2],!0,1)):_-101==3||_-101==6?this.canMusic&&(cc.audioEngine.stop(this.audioBg),this.audioBg=cc.audioEngine.play(this.audio_bg[1],!0,1)):_-101==2?this.canMusic&&(cc.audioEngine.stop(this.audioBg),this.audioBg=cc.audioEngine.play(this.audio_bg[3],!0,1)):_-101==4?this.canMusic&&(cc.audioEngine.stop(this.audioBg),this.audioBg=cc.audioEngine.play(this.audio_bg[4],!0,1)):this.canMusic&&(cc.audioEngine.stop(this.audioBg),this.audioBg=cc.audioEngine.play(this.audio_bg[0],!0,1))}else"201"==e||"202"==e||"203"==e||"204"==e||"205"==e||"206"==e||"207"==e||"208"==e||"209"==e||"210"==e||"211"==e||"212"==e||"213"==e||"214"==e||"215"==e||"216"==e||"217"==e?(_=parseInt(e),this.xuanZhongSkin_2(_-201),this.chengBlockHero(_-201+1)):"btnHome_level"==e?(this.nodeLevels.active=!1,this.nodeSkin.active=!1,this.nodePlaying.active=!1,this.nodeReady.active=!0,this.nodeOver.active=!1):"btnSetting_level"==e?this.nodeSetting.active=!0:"btnClose_setting"==e?this.nodeSetting.active=!1:"btnMusicOff_setting"==e?(this.canMusic=!0,cc.audioEngine.resume(this.audioBg),this.nodeSetting.getChildByName("bg").getChildByName("btnMusicOn_setting").active=!0,this.nodeSetting.getChildByName("bg").getChildByName("btnMusicOff_setting").active=!1):"btnMusicOn_setting"==e?(this.canMusic=!1,cc.audioEngine.pause(this.audioBg),this.nodeSetting.getChildByName("bg").getChildByName("btnMusicOn_setting").active=!1,this.nodeSetting.getChildByName("bg").getChildByName("btnMusicOff_setting").active=!0):"btnSoundOff_setting"==e?(this.canEffect=!0,this.nodeSetting.getChildByName("bg").getChildByName("btnSoundOn_setting").active=!0,this.nodeSetting.getChildByName("bg").getChildByName("btnSoundOff_setting").active=!1):"btnSoundOn_setting"==e&&(this.canEffect=!1,this.nodeSetting.getChildByName("bg").getChildByName("btnSoundOn_setting").active=!1,this.nodeSetting.getChildByName("bg").getChildByName("btnSoundOff_setting").active=!0)},xuanZhongSkin_1:function(t){for(var e=this.skinContent.getChildByName("node_skin_1").children,i=0;i<e.length;i++)e[i].getChildByName("sp").active=i==t},xuanZhongSkin_2:function(t){for(var e=this.skinContent.getChildByName("node_skin_2").children,i=0;i<e.length;i++)i==t?(e[i].getChildByName("sp_2").active=!0,e[i].getChildByName("sp_1").active=!1):(e[i].getChildByName("sp_2").active=!1,e[i].getChildByName("sp_1").active=!0)},initBtnPos:function(){var t=this.nodeBtnPlaying.getChildByName("btnMenu_playing");cc.v2(t.x,t.y),this.nodeBtnPlaying.getChildByName("btnMenuClose_playing").active=!1,this.nodeBtnPlaying.getChildByName("btnMenuHint_playing").active=!0,this.nodeBtnPlaying.getChildByName("btnMenuReplay_playing").active=!0,this.nodeBtnPlaying.getChildByName("btnMenu_playing").active=!0,this.nodeBtnPlaying.getChildByName("btnHome_playing").active=!1,this.nodeBtnPlaying.getChildByName("btnLevels_playiny").active=!1,this.nodeBtnPlaying.getChildByName("btnSkin_playiny").active=!1,this.nodeBtnPlaying.getChildByName("btnSetting_playiny").active=!1},actMenu:function(t){var e=this.nodeBtnPlaying.getChildByName("btnMenu_playing"),i=cc.v2(e.x,e.y),c=Math.abs(e.x)/2;if("btnMenu_playing"==t)this.nodeBtnPlaying.getChildByName("btnHome_playing").active=!0,this.nodeBtnPlaying.getChildByName("btnLevels_playiny").active=!0,this.nodeBtnPlaying.getChildByName("btnSkin_playiny").active=!0,this.nodeBtnPlaying.getChildByName("btnSetting_playiny").active=!0,this.nodeBtnPlaying.getChildByName("btnHome_playing").runAction(cc.moveTo(.1,cc.v2(i.x+c,i.y))),this.nodeBtnPlaying.getChildByName("btnLevels_playiny").runAction(cc.moveTo(.14,cc.v2(i.x+2*c,i.y))),this.nodeBtnPlaying.getChildByName("btnSkin_playiny").runAction(cc.moveTo(.16,cc.v2(i.x+3*c,i.y))),this.nodeBtnPlaying.getChildByName("btnSetting_playiny").runAction(cc.moveTo(.17,cc.v2(i.x+4*c,i.y))),this.nodeBtnPlaying.getChildByName("btnMenuClose_playing").active=!0,this.nodeBtnPlaying.getChildByName("btnMenuHint_playing").active=!1,this.nodeBtnPlaying.getChildByName("btnMenuReplay_playing").active=!1,e.active=!1;else if("btnMenuClose_playing"==t){this.nodeBtnPlaying.getChildByName("btnMenuClose_playing").active=!1,e.active=!0;var n=cc.moveTo(.1,cc.v2(i.x,i.y)),o=cc.callFunc(function(){this.nodeBtnPlaying.getChildByName("btnHome_playing").active=!1}.bind(this)),s=cc.moveTo(.14,cc.v2(i.x,i.y)),a=cc.callFunc(function(){this.nodeBtnPlaying.getChildByName("btnLevels_playiny").active=!1}.bind(this)),h=cc.moveTo(.16,cc.v2(i.x,i.y)),l=cc.callFunc(function(){this.nodeBtnPlaying.getChildByName("btnSkin_playiny").active=!1}.bind(this)),r=cc.moveTo(.17,cc.v2(i.x,i.y)),g=cc.callFunc(function(){this.nodeBtnPlaying.getChildByName("btnSetting_playiny").active=!1,this.nodeBtnPlaying.getChildByName("btnMenuHint_playing").active=!0,this.nodeBtnPlaying.getChildByName("btnMenuReplay_playing").active=!0}.bind(this));this.nodeBtnPlaying.getChildByName("btnHome_playing").runAction(cc.sequence(n,o)),this.nodeBtnPlaying.getChildByName("btnLevels_playiny").runAction(cc.sequence(s,a)),this.nodeBtnPlaying.getChildByName("btnSkin_playiny").runAction(cc.sequence(h,l)),this.nodeBtnPlaying.getChildByName("btnSetting_playiny").runAction(cc.sequence(r,g))}},setBlockParent:function(){this.blockParent.width=6*this.block_WH+7*this.f_jiange,this.blockParent.height=6*this.block_WH+7*this.f_jiange,this.blockParent.scale=.95;var t=this.blockParent.getChildByName("sp_shang");t.width=this.blockParent.width+10,t.y=this.blockParent.height/2+5;var e=this.blockParent.getChildByName("sp_xia");e.width=this.blockParent.width+10,e.y=-this.blockParent.height/2-5;var i=this.blockParent.getChildByName("sp_zuo");i.height=this.blockParent.height+10,i.x=-this.blockParent.width/2-5;var c=this.blockParent.getChildByName("sp_you_shang");c.height=2*this.block_WH+2*this.f_jiange,c.x=this.blockParent.width/2+5,c.y=this.blockParent.height/2+5;var n=this.blockParent.getChildByName("sp_you_xia");n.height=3*this.block_WH+3*this.f_jiange,n.x=this.blockParent.width/2+5,n.y=-this.blockParent.height/2-5;var o=this.blockParent.getChildByName("sp_you_shang_1");o.width=2*this.block_WH+2*this.f_jiange,o.x=this.blockParent.width/2+5,o.y=c.y-c.height;var s=this.blockParent.getChildByName("sp_you_xia_1");s.width=2*this.block_WH+2*this.f_jiange,s.x=this.blockParent.width/2+5,s.y=n.y+n.height;var a=this.blockParent.getChildByName("sp_shang_1");a.width=this.blockParent.width+60,a.y=this.blockParent.height/2+30;var h=this.blockParent.getChildByName("sp_xia_1");h.width=this.blockParent.width+60,h.y=-this.blockParent.height/2-30;var l=this.blockParent.getChildByName("sp_zuo_1");l.height=this.blockParent.height+60,l.x=-this.blockParent.width/2-30;var r=this.blockParent.getChildByName("sp_you_shang_11");r.height=2*this.block_WH+2*this.f_jiange,r.x=this.blockParent.width/2+30,r.y=this.blockParent.height/2+30;var g=this.blockParent.getChildByName("sp_you_xia_11");g.height=3*this.block_WH+3*this.f_jiange,g.x=this.blockParent.width/2+30,g.y=-this.blockParent.height/2-30;var d=this.blockParent.getChildByName("sp_you_shang_1_11");d.width=2*this.block_WH+2*this.f_jiange,d.x=this.blockParent.width/2+30,d.y=r.y-r.height;var v=this.blockParent.getChildByName("sp_you_xia_1_11");v.width=2*this.block_WH+2*this.f_jiange,v.x=this.blockParent.width/2+30,v.y=g.y+g.height},update:function(){1==this.gameType&&(this.timeScore++,this.timeScore>=60&&(this.timeScore=0,this.socreCurr++))}}),cc._RF.pop()},{}],use_reversed_rotateBy:[function(t,e){"use strict";cc._RF.push(e,"594afcjrShFM4766ofxu36F","use_reversed_rotateBy"),cc.RotateBy._reverse=!0,cc._RF.pop()},{}]},{},["use_reversed_rotateBy","api","block","btnLevel","common","game","gameData","gameEdit"]);